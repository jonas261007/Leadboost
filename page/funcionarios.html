<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <title>Funcionários</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="../img/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/menu-geral.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.1/font/bootstrap-icons.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.10.2/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light custom-navbar">
        <div class="container">
            <img src="../img/LOGO-PROJETO.png" alt="Logo" class="logo">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="./Home.html">
                            <i class="bi bi-house-door"></i> Home
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active"  aria-current="page" href="funcionarios.html">
                            <i class="bi bi-person"></i> <b>Funcionários</b>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link"  href="administrador.html">
                            <i class="bi bi-shield-lock"></i> Administrador
                        </a>
                    </li>
                </ul>
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="../index.html" id="logoutButton"><i class="bi bi-box-arrow-right"></i> Sair</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="container mt-4 d-flex justify-content-between search-ajuste">
        <div class="container d-flex justify-content-end gap p-2 btn-ajuste">
            <a class="btn btn-primary col-sm-2" href="javascript:void(0)" onclick="exportToExcel()">
                <i class="bi bi-cloud-download mr-3"></i>Baixar planilha
              </a>
         
          <form class="d-flex mt-3 mt-lg-0 mx-4" role="search">
            <input class="form-control me-2" type="search" placeholder="Search" aria-label="Pesquisar...">
          </form>
      </div>
        </div>
    </section>

    <main class="container mt-4">
        <div class="table-responsive">
            <table id="example" class="table table-striped table-width">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Email</th>
                        <th>Cargo</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><a href="/page/perfil-Funcionario.html">Maria Silva</a></td>
                        <td>maria@example.com</td>
                        <td>Funcionário temporário</td>
                        <td>
                            <button class="btn btn-danger" onclick="deletarFuncionario(this)"><i class="bi bi-trash"></i></button>
                            <button class="btn btn-primary" onclick="mostrarFormularioEdicao(this)"><i class="bi bi-pencil"></i></button>
                        </td>
                    </tr>
                    <tr class="form-edicao" style="display: none;">
                        <td><input type="text" value="Maria Silva" id="nomeEdit" /></td>
                        <td><input type="text" value="maria@example.com" id="emailEdit" /></td>
                        <td><input type="text" value="Funcionário temporário" id="cargoEdit" /></td>
                        <td>
                            <button class="btn btn-success" onclick="salvarEdicao(this)">Salvar</button>
                            <button class="btn btn-danger" onclick="cancelarEdicao(this)">Cancelar</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

    <main class="container mt-4">
        <button class="btn btn-primary mt-3" id="toggleFormButton">Adicionar Funcionário</button>
        
        <div class="mt-4" id="formContainer" style="display: none;">
            <form id="meuForm">
                <div class="form-group">
                    <label for="nome">Nome</label>
                    <input type="text" class="form-control col-4" id="nome" placeholder="Nome do funcionário">
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" class="form-control col-4" id="email" placeholder="Email do funcionário">
                </div>
                <div class="form-group">
                    <label for="cpf">CPF</label>
                    <input type="text" class="form-control col-4" id="cpf" placeholder="CPF do funcionário">
                </div>
                <div class="form-group">
                    <label for="ddd-telefone">Telefone:</label>
                    <div class="d-flex">
                        <input type="text" class="form-control col-1" id="ddd" name="ddd" placeholder="DDD" maxlength="2" />
                        <input type="text" class="form-control ml-1 col-3" id="telefone" name="telefone" placeholder="Telefone" />
                    </div>
                </div>
                <div class="form-group">
                    <label for="cargo">Cargo</label>
                    <select class="form-control col-4" id="cargo">
                        <option value="" disabled selected>Selecione um cargo</option>
                        <option value="cargo1">Administrador</option>
                        <option value="cargo2">Funcionário</option>
                        <option value="cargo3">Temporário</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="foto">Foto</label>
                    <input type="file" class="form-control-file" id="foto" />
                </div>
                <div class="form-group">
                    <button type="button" class="btn btn-primary" onclick="enviarParaFirebase()">Cadastrar</button>
                    <button type="button" class="btn btn-secondary" id="cancelarButton">Cancelar</button>
                    <button type="button" class="btn btn-secondary" id="apagarButton">Apagar</button>
                </div>
            </form>
        </div>
    </main>
    
    <div class="container rodape">
        <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
          <p class="col-md-4 mb-0 text-body-secondary">&copy; www.teamBoost.com.br</p>
      
          <a href="/" class="col-md-4 d-flex align-items-center justify-content-center mb-3 mb-md-auto link-body-emphasis text-decoration-none">
            <svg class="bi me-2" width="40" height="32"><use xlink:href="#bootstrap"/></svg>
          </a>
      
          <ul class="nav col-md-4 justify-content-end">
            <li class="nav-item"><a href="#" class="nav-link px-2 text-body-secondary"><p>Suporte: Leadboost.team@gmail.com</p></a></li>
            <li class="nav-item"><a href="#" class="nav-link px-2 text-body-secondary"> <p>Contato: 81 9999-6666</p></a></li>
          </ul>
        </footer>
      </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="../banco/firebase-config.js"></script>
    <script src="../banco/funcionarios.js"></script>
    <script>
    
        const toggleFormButton = document.getElementById("toggleFormButton");
        const formContainer = document.getElementById("formContainer");
        const cadastrarButton = document.getElementById("cadastrarButton");
        const cancelarButton = document.getElementById("cancelarButton");
        const apagarButton = document.getElementById("apagarButton");

        toggleFormButton.addEventListener("click", function() {
            if (formContainer.style.display === "none") {
                formContainer.style.display = "block";
                // Rolar a página até o formulário
                window.scrollTo({ top: formContainer.offsetTop, behavior: 'smooth' });
            } else {
                formContainer.style.display = "none";
            }
        });

        cancelarButton.addEventListener("click", function() {
            formContainer.style.display = "none";
        });

        apagarButton.addEventListener("click", function() {
            // Adicione aqui a lógica para apagar o conteúdo do formulário
            // Por exemplo, limpar os campos de entrada
            const nomeInput = document.getElementById("nome");
            const emailInput = document.getElementById("email");
            // Limpe os campos de entrada
            nomeInput.value = "";
            emailInput.value = "";
        });
    </script>

    <script>
        function mostrarFormularioEdicao(button) {
            const row = button.closest('tr');
            const formRow = row.nextElementSibling;
            formRow.style.display = 'table-row';
            row.style.display = 'none';
        }

        function cancelarEdicao(button) {
            const formRow = button.closest('tr');
            const dataRow = formRow.previousElementSibling;
            formRow.style.display = 'none';
            dataRow.style.display = 'table-row';
        }

        function salvarEdicao(button) {
            const formRow = button.closest('tr');
            const dataRow = formRow.previousElementSibling;

            // Obtenha os novos valores dos campos de edição
            const nome = formRow.querySelector('#nomeEdit').value;
            const email = formRow.querySelector('#emailEdit').value;
            const cargo = formRow.querySelector('#cargoEdit').value;

            // Atualize os valores na linha de dados
            dataRow.querySelector('td:nth-child(1)').innerHTML = '<a href="perfilFuncionario.html">' + nome + '</a>';
            dataRow.querySelector('td:nth-child(2)').textContent = email;
            dataRow.querySelector('td:nth-child(3)').textContent = cargo;

            formRow.style.display = 'none';
            dataRow.style.display = 'table-row';
        }
    </script>


</body>
</html>
